<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>A World Away - Exoplanet Explorer</title>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/style.css') }}"
    />
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  </head>
  <body>
    <style>
      /* Import React app header styles */
      :root {
        --color-dark-blue: #0A0D1F; 
        --color-text-white: #FFFFFF;
        --color-button: #007bff; 
      }

      .navbar {
        position: fixed;
        top: 0;
        left: 0;
        width: 95%;
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 20px 40px;
        background: rgba(10, 13, 31, 0.9);
        backdrop-filter: blur(10px);
        z-index: 100;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      }

      .logoContainer {
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
      }

      .logoCircle {
        width: 60px;
        height: 60px;
        border: 2px solid var(--color-text-white);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 24px;
      }

      .logoSlogan {
        font-size: 0.7rem;
        margin-top: 5px;
        text-align: center;
        color: var(--color-text-white);
      }

      .navLinks {
        list-style: none;
        display: flex;
        gap: 30px;
        margin: 0;
        padding: 0;
      }

      .navLinks a {
        color: var(--color-text-white);
        text-decoration: none;
        font-size: 1.1rem;
        transition: color 0.3s;
        padding: 8px 16px;
        border-radius: 8px;
      }

      .navLinks a:hover {
        background: rgba(255, 255, 255, 0.1);
      }

      .navLinks a.active {
        background: rgba(0, 123, 255, 0.3);
        border: 1px solid rgba(0, 123, 255, 0.5);
      }



      body {
        margin: 0;
        padding: 0;
        background: linear-gradient(135deg, #0A0D1F 0%, #1a1a2e 50%, #16213e 100%);
        color: white;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
        min-height: 100vh;
        padding-top: 120px;
      }
    </style>

    <nav class="navbar">
      <div class="logoContainer">
        <div class="logoCircle">üåå</div>
        <div class="logoSlogan">Exora - Exploring Pathways Beyond</div>
      </div>
      <ul class="navLinks">
        <li><a href="http://localhost:5173/" class="nav-link active">Home</a></li>
        <li><a href="/starmap" class="nav-link">Star Map</a></li>
        <li>
          <a href="/discovery-trends" class="nav-link"
            >Discovery Trends</a>
        </li>
        <li><a href="/orbital-viewer" class="nav-link">Orbital Viewer</a></li>
        <li><a href="/planet-explorer" class="nav-link">Planet Explorer</a></li>
        <li>
          <a href="http://localhost:5173/radial-velocity" class="nav-link">RV Analysis</a>
        </li>
        <li>
          <a href="/predict">AI Predict</a>
        </li>
      </ul>
    </nav>

    <main class="main-content">
      <section class="hero">
        <div class="hero-content">
          <h1>üöÄ Hunting Exoplanets with AI</h1>
          <p class="hero-subtitle">
            Explore the universe of discovered exoplanets through interactive
            visualizations
          </p>
          <div class="hero-stats" id="hero-stats">
            <div class="stat-item">
              <span class="stat-number" id="total-planets">Loading...</span>
              <span class="stat-label">Confirmed Exoplanets</span>
            </div>
            <div class="stat-item">
              <span class="stat-number" id="total-stars">Loading...</span>
              <span class="stat-label">Host Stars</span>
            </div>
            <div class="stat-item">
              <span class="stat-number" id="discovery-methods">Loading...</span>
              <span class="stat-label">Discovery Methods</span>
            </div>
          </div>
        </div>
      </section>

      <section class="features-grid">
        <div class="feature-card" onclick="window.location.href='/starmap'">
          <div class="feature-icon">üî≠</div>
          <h3>Interactive Star Map</h3>
          <p>
            Explore stars and their exoplanets in a 3D interactive environment.
            Click on stars to discover their planetary systems.
          </p>
          <button class="feature-btn">Explore Stars</button>
        </div>

        <div
          class="feature-card"
          onclick="window.location.href='/discovery-trends'"
        >
          <div class="feature-icon">üìä</div>
          <h3>Discovery Trends</h3>
          <p>
            Analyze exoplanet discovery patterns over time, methods used, and
            statistical insights from NASA data.
          </p>
          <button class="feature-btn">View Trends</button>
        </div>

        <div
          class="feature-card"
          onclick="window.location.href='/orbital-viewer'"
        >
          <div class="feature-icon">üåç</div>
          <h3>3D Orbital Viewer</h3>
          <p>
            Visualize planetary orbits in 3D space. See how exoplanets move
            around their host stars.
          </p>
          <button class="feature-btn">View Orbits</button>
        </div>

        <div
          class="feature-card"
          onclick="window.location.href='/planet-explorer'"
        >
          <div class="feature-icon">ü™ê</div>
          <h3>Planet Explorer</h3>
          <p>
            Deep dive into individual exoplanets, their characteristics, and
            compare them with planets in our solar system.
          </p>
          <button class="feature-btn">Explore Planets</button>
        </div>

        <div
          class="feature-card"
          onclick="window.location.href='/predict'"
        >
          <div class="feature-icon">üîÆ</div>
          <h3>AI Prediction</h3>
          <p>
            Use our trained machine learning model to predict if planet candidates are confirmed exoplanets, candidates, or false positives.
          </p>
          <button class="feature-btn">Predict Now</button>
        </div>
      </section>

      <section class="data-preview">
        <h2>üìà Live Discovery Statistics</h2>
        <div class="charts-container">
          <div class="chart-box">
            <h3>Recent Discoveries by Year</h3>
            <div id="discovery-timeline-chart"></div>
          </div>
          <div class="chart-box">
            <h3>Discovery Methods Distribution</h3>
            <div id="methods-pie-chart"></div>
          </div>
        </div>
      </section>

      <section class="data-sources">
        <h2>üìä Data Sources</h2>
        <div class="sources-grid">
          <div class="source-item">
            <h4>NASA Exoplanet Archive</h4>
            <p>
              Comprehensive catalog of confirmed exoplanets with detailed
              orbital and physical parameters.
            </p>
          </div>
          <div class="source-item">
            <h4>TESS Mission Data</h4>
            <p>
              Transit data from NASA's Transiting Exoplanet Survey Satellite for
              the latest discoveries.
            </p>
          </div>
          <div class="source-item">
            <h4>Exoplanet Orbit Database</h4>
            <p>
              Orbital parameters and system architectures for detailed 3D
              visualizations.
            </p>
          </div>
        </div>
      </section>
    </main>

    <footer class="footer">
      <div class="footer-content">
        <p>
          &copy; 2025 A World Away - Exoplanet Explorer | Data from NASA
          Exoplanet Archive
        </p>
      </div>
    </footer>

    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
    <script>
      // Initialize dashboard
      document.addEventListener("DOMContentLoaded", function () {
        loadDashboardData();
      });

      async function loadDashboardData() {
        try {
          // Load basic statistics
          const exoplanetsResponse = await fetch("/api/exoplanets?limit=10");
          const exoplanets = await exoplanetsResponse.json();

          const statsResponse = await fetch("/api/discovery-stats");
          const stats = await statsResponse.json();

          const methodsResponse = await fetch("/api/discovery-methods");
          const methods = await methodsResponse.json();

          // Update hero stats
          document.getElementById("total-planets").textContent =
            stats.total_planets || "N/A";
          document.getElementById("total-stars").textContent =
            new Set(exoplanets.map((p) => p.host_star)).size || "N/A";
          document.getElementById("discovery-methods").textContent =
            methods.methods.length || "N/A";

          // Create discovery timeline chart
          const timelineTrace = {
            x: stats.years,
            y: stats.counts,
            type: "scatter",
            mode: "lines+markers",
            name: "Discoveries",
            line: { color: "#4f46e5", width: 3 },
            marker: { size: 6, color: "#4f46e5" },
          };

          Plotly.newPlot("discovery-timeline-chart", [timelineTrace], {
            title: "",
            xaxis: { title: "Year" },
            yaxis: { title: "Number of Discoveries" },
            margin: { t: 20, r: 20, b: 40, l: 50 },
            height: 300,
            plot_bgcolor: "rgba(0,0,0,0)",
            paper_bgcolor: "rgba(0,0,0,0)",
          });

          // Create methods pie chart
          const pieTrace = {
            labels: methods.methods,
            values: methods.counts,
            type: "pie",
            marker: {
              colors: ["#4f46e5", "#06b6d4", "#10b981", "#f59e0b", "#ef4444"],
            },
          };

          Plotly.newPlot("methods-pie-chart", [pieTrace], {
            title: "",
            margin: { t: 20, r: 20, b: 20, l: 20 },
            height: 300,
            plot_bgcolor: "rgba(0,0,0,0)",
            paper_bgcolor: "rgba(0,0,0,0)",
            showlegend: true,
          });
        } catch (error) {
          console.error("Error loading dashboard data:", error);
          document.getElementById("total-planets").textContent = "Error";
          document.getElementById("total-stars").textContent = "Error";
          document.getElementById("discovery-methods").textContent = "Error";
        }
      }
    </script>
  </body>
</html>
